<script type="text/ng-template" id="sf-page-selector-template">
    <div class="modal-header">
        <button type="button" class="close" ng-click="cancel()">&times;</button>
        <h3 class="modal-title">Select content</h3>
    </div>
    <div class="modal-body">
        <div kendo-tab-strip class="k-tabstrip--selection">
            <ul ng-show="multiselect">
                <li ng-class="{true:'k-state-active', false:''}[!isItemSelected() || multiselect === false]" ng-click="removeUnselectedItems()">
                    All
                </li>
                <li ng-class="{true:'k-state-active', false:''}[isItemSelected() && multiselect === true]" ng-click="collectSelectedItems()">
                    Selected <span class="badge">{{getSelectedItemsCount()}}</span>
                </li>
            </ul>
            <div>
                <div ng-show="noItemsExist" class="alert alert-info">No items have been created yet.</div>

                <alert type="danger" ng-show="showError">{{errorMessage}}</alert>

                <div ng-hide="noItemsExist || showError">
                    <div class="input-group m-bottom-sm">
                        <span class="input-group-addon">
                            <i class="glyphicon glyphicon-search"></i>
                        </span>
                        <sf-items-filter filter='filter'></sf-items-filter>
                    </div>
                    <div class="list-group list-group-endless">
                        <sf-items-tree
                            ng-show="filter.isEmpty"
                            sf-multiselect="multiselect"
                            sf-expand-selection="expandSelection"
                            sf-items-promise="itemsPromise"
                            sf-selected-ids="selectedIds"
                            sf-get-predecessors="getPredecessors(itemId)"
                            sf-select-item="itemClicked(dataItem)"
                            sf-item-selected="isItemSelectedInDialog(dataItem)"
                            sf-item-disabled="itemDisabled(dataItem)"
                            sf-get-children="getChildren(parentId)"
                            sf-identifier-field-value="bindIdentifierField(dataItem)"
                            class="k-treeview--selection"></sf-items-tree>

                        <div ng-repeat="item in items"
                                ng-hide="filter.isEmpty"
                                ng-class="{'list-group-item':true, 'active': isItemSelectedInDialog(item), 'list-group-item-multiselect': multiselect }"
                                ng-click="itemClicked($index, item)">

                            <input type="checkbox" ng-checked="isItemSelectedInDialog(item)" ng-show="multiselect" ng-hide="itemDisabled(item)">

                            <div>
                                <div ng-bind="bindIdentifierField(item)" style="float:left; display: inline"  />

                                <div ng-show="itemDisabled(item)" style="float:left; display: inline; margin-left:5px">(not translated)</div>
                            </div>

                           <div ng-class="{'text-muted': !isItemSelectedInDialog(item)}">{{item.ParentTitlesPath}}</div>

                            
                        </div>
                    </div>
                    <div ng-hide="items.length || showLoadingIndicator"><i>No items found</i></div>
                    <div class="s-loading" ng-show="showLoadingIndicator" style="display: inline-block; width: 30px;"></div>
                </div>
            </div>
            <div>
                <sf-selected-items-view items='selectedItemsViewData' selected-items='selectedItemsInTheDialog' search-identifier-field='searchIdentifierField' 
                    identifier-field='identifierField' sortable='{{sortable}}'>
                </selected-items-view>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" ng-hide="noItemsExist || showError" class="btn btn-primary  pull-left" ng-click="doneSelecting()">Done selecting</button>
        <button type="button" class="btn btn-link  pull-left" ng-click="cancel()">Cancel</button>
    </div>
</script>
